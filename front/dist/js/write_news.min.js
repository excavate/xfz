function News(){this.progressGroup=$("#progress-group")}News.prototype.initUEditor=function(){window.ue=UE.getEditor("editor",{initialFrameHeight:400,serverUrl:"/ueditor/upload/"})},News.prototype.listenUploadFileEvent=function(){var n=$("#thumbnail-btn");n.change(function(){var t=n[0].files[0],e=new FormData;e.append("file",t),xfzajax.post({url:"/cms/upload_file/",data:e,processData:!1,contentType:!1,success:function(t){var e;200===t.code&&(e=t.data.url,$("#thumbnail-form").val(e)),400===t.code&&n.val("")}})})},News.prototype.listenSubmitEvent=function(){$("#submit-btn").click(function(t){t.preventDefault();var e=$(this).attr("data-news-id"),n=$("input[name='title']").val(),i=$("select[name='category']").val(),o=$("input[name='desc']").val(),a=$("input[name='thumbnail']").val(),r=window.ue.getContent(),s="",s=e?"/cms/edit_news/":"/cms/write_news/";xfzajax.post({url:s,data:{title:n,category:i,desc:o,thumbnail:a,content:r,news_id:e},success:function(t){200===t.code&&(e?xfzalert.alertSuccess("恭喜！新闻修改成功！",function(){window.location.reload()}):xfzalert.alertSuccess("恭喜！新闻发表成功！",function(){window.location.reload()}))}})})},News.prototype.run=function(){var t=this;t.initUEditor(),t.listenSubmitEvent(),t.listenUploadFileEvent()},$(function(){(new News).run(),News.progressGroup=$("#progress-group")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid3JpdGVfbmV3cy5taW4uanMiLCJzb3VyY2VzIjpbIndyaXRlX25ld3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gTmV3cygpIHtcclxuICAgIHRoaXMucHJvZ3Jlc3NHcm91cCA9ICQoXCIjcHJvZ3Jlc3MtZ3JvdXBcIik7XHJcbn1cclxuXHJcbk5ld3MucHJvdG90eXBlLmluaXRVRWRpdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgd2luZG93LnVlID0gVUUuZ2V0RWRpdG9yKCdlZGl0b3InLHtcclxuICAgICAgICAnaW5pdGlhbEZyYW1lSGVpZ2h0JzogNDAwLFxyXG4gICAgICAgICdzZXJ2ZXJVcmwnOiAnL3VlZGl0b3IvdXBsb2FkLydcclxuICAgIH0pO1xyXG59O1xyXG5cclxuLy/kuIrkvKDliLDmnKzlnLDmnI3liqHlmahcclxuTmV3cy5wcm90b3R5cGUubGlzdGVuVXBsb2FkRmlsZUV2ZW50ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbiAgICB1cGxvYWRCdG4uY2hhbmdlKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgZmlsZSA9IHVwbG9hZEJ0blswXS5maWxlc1swXTtcclxuICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLGZpbGUpO1xyXG4gICAgICAgIHhmemFqYXgucG9zdCh7XHJcbiAgICAgICAgICAgICd1cmwnOiAnL2Ntcy91cGxvYWRfZmlsZS8nLFxyXG4gICAgICAgICAgICAnZGF0YSc6IGZvcm1EYXRhLFxyXG4gICAgICAgICAgICAncHJvY2Vzc0RhdGEnOiBmYWxzZSxcclxuICAgICAgICAgICAgJ2NvbnRlbnRUeXBlJzogZmFsc2UsXHJcbiAgICAgICAgICAgICdzdWNjZXNzJzogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYocmVzdWx0Wydjb2RlJ10gPT09IDIwMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVybCA9IHJlc3VsdFsnZGF0YSddWyd1cmwnXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiI3RodW1ibmFpbC1mb3JtXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdFsnY29kZSddID09PSA0MDApe1xyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZEJ0bi52YWwoJycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufTtcclxuXHJcbi8vTmV3cy5wcm90b3R5cGUubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQgPSBmdW5jdGlvbiAoKSB7XHJcbi8vICAgIHZhciBzZWxmID0gdGhpcztcclxuLy8gICAgdmFyIHVwbG9hZEJ0biA9ICQoJyN0aHVtYm5haWwtYnRuJyk7XHJcbi8vICAgIHVwbG9hZEJ0bi5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG4vLyAgICAgICAgeGZ6YWpheC5nZXQoe1xyXG4vLyAgICAgICAgICAgICd1cmwnOiAnL2Ntcy9xbnRva2VuLycsXHJcbi8vICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbi8vICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4vLyAgICAgICAgICAgICAgICAgICAgdmFyIHRva2VuID0gcmVzdWx0WydkYXRhJ11bJ3Rva2VuJ107XHJcbi8vICAgICAgICAgICAgICAgICAgICAvLyBhLmIuanBnID0gWydhJywnYicsJ2pwZyddXHJcbi8vICAgICAgICAgICAgICAgICAgICAvLyAxOTg4ODg4ODggKyAuICsganBnID0gMTk4ODg4OC5qcGdcclxuLy8gICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpICsgJy4nICsgZmlsZS5uYW1lLnNwbGl0KCcuJylbMV07XHJcbi8vICAgICAgICAgICAgICAgICAgICB2YXIgcHV0RXh0cmEgPSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgZm5hbWU6IGtleSxcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6e30sXHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IFsnaW1hZ2UvcG5nJywnaW1hZ2UvanBlZycsJ2ltYWdlL2dpZicsJ3ZpZGVvL3gtbXMtd212J11cclxuLy8gICAgICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnID0ge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHVzZUNkbkRvbWFpbjogdHJ1ZSxcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICByZXRyeUNvdW50OiA2LFxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbjogcWluaXUucmVnaW9uLnowXHJcbi8vICAgICAgICAgICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmFibGUgPSBxaW5pdS51cGxvYWQoZmlsZSxrZXksdG9rZW4scHV0RXh0cmEsY29uZmlnKTtcclxuLy8gICAgICAgICAgICAgICAgICAgIG9ic2VydmFibGUuc3Vic2NyaWJlKHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAnbmV4dCc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZFByb2dyZXNzLFxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcic6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZEVycm9yLFxyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICdjb21wbGV0ZSc6IHNlbGYuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlXHJcbi8vICAgICAgICAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgIH1cclxuLy8gICAgICAgIH0pO1xyXG4vLyAgICB9KTtcclxuLy99O1xyXG4vL1xyXG4vL05ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRQcm9ncmVzcyA9IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4vLyAgICB2YXIgdG90YWwgPSByZXNwb25zZS50b3RhbDtcclxuLy8gICAgdmFyIHBlcmNlbnQgPSB0b3RhbC5wZXJjZW50O1xyXG4vLyAgICB2YXIgcGVyY2VudFRleHQgPSBwZXJjZW50LnRvRml4ZWQoMCkrJyUnO1xyXG4vLyAgICAvLyAyNC4wOTA577yMODkuMDAwLi4uLlxyXG4vLyAgICB2YXIgcHJvZ3Jlc3NHcm91cCA9IE5ld3MucHJvZ3Jlc3NHcm91cDtcclxuLy8gICAgcHJvZ3Jlc3NHcm91cC5zaG93KCk7XHJcbi8vICAgIHZhciBwcm9ncmVzc0JhciA9ICQoXCIucHJvZ3Jlc3MtYmFyXCIpO1xyXG4vLyAgICBwcm9ncmVzc0Jhci5jc3Moe1wid2lkdGhcIjpwZXJjZW50VGV4dH0pO1xyXG4vLyAgICBwcm9ncmVzc0Jhci50ZXh0KHBlcmNlbnRUZXh0KTtcclxuLy99O1xyXG4vL1xyXG4vL05ld3MucHJvdG90eXBlLmhhbmRsZUZpbGVVcGxvYWRFcnJvciA9IGZ1bmN0aW9uIChlcnJvcikge1xyXG4vLyAgICB3aW5kb3cubWVzc2FnZUJveC5zaG93RXJyb3IoZXJyb3IubWVzc2FnZSk7XHJcbi8vICAgIHZhciBwcm9ncmVzc0dyb3VwID0gJChcIiNwcm9ncmVzcy1ncm91cFwiKTtcclxuLy8gICAgcHJvZ3Jlc3NHcm91cC5oaWRlKCk7XHJcbi8vICAgIGNvbnNvbGUubG9nKGVycm9yLm1lc3NhZ2UpO1xyXG4vL307XHJcbi8vXHJcbi8vTmV3cy5wcm90b3R5cGUuaGFuZGxlRmlsZVVwbG9hZENvbXBsZXRlID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7XHJcbi8vICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcclxuLy8gICAgdmFyIHByb2dyZXNzR3JvdXAgPSAkKFwiI3Byb2dyZXNzLWdyb3VwXCIpO1xyXG4vLyAgICBwcm9ncmVzc0dyb3VwLmhpZGUoKTtcclxuLy9cclxuLy8gICAgdmFyIGRvbWFpbiA9ICdodHRwOi8vN3hxZW51LmNvbTEuejAuZ2xiLmNsb3VkZG4uY29tLyc7XHJcbi8vICAgIHZhciBmaWxlbmFtZSA9IHJlc3BvbnNlLmtleTtcclxuLy8gICAgdmFyIHVybCA9IGRvbWFpbiArIGZpbGVuYW1lO1xyXG4vLyAgICB2YXIgdGh1bWJuYWlsSW5wdXQgPSAkKFwiaW5wdXRbbmFtZT0ndGh1bWJuYWlsJ11cIik7XHJcbi8vICAgIHRodW1ibmFpbElucHV0LnZhbCh1cmwpO1xyXG4vL307XHJcblxyXG5OZXdzLnByb3RvdHlwZS5saXN0ZW5TdWJtaXRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBzdWJtaXRCdG4gPSAkKFwiI3N1Ym1pdC1idG5cIik7XHJcbiAgICBzdWJtaXRCdG4uY2xpY2soZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB2YXIgYnRuID0gJCh0aGlzKTtcclxuICAgICAgICB2YXIgcGsgPSBidG4uYXR0cignZGF0YS1uZXdzLWlkJyk7XHJcblxyXG4gICAgICAgIHZhciB0aXRsZSA9ICQoXCJpbnB1dFtuYW1lPSd0aXRsZSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjYXRlZ29yeSA9ICQoXCJzZWxlY3RbbmFtZT0nY2F0ZWdvcnknXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgZGVzYyA9ICQoXCJpbnB1dFtuYW1lPSdkZXNjJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHRodW1ibmFpbCA9ICQoXCJpbnB1dFtuYW1lPSd0aHVtYm5haWwnXVwiKS52YWwoKTtcclxuICAgICAgICB2YXIgY29udGVudCA9IHdpbmRvdy51ZS5nZXRDb250ZW50KCk7XHJcblxyXG4gICAgICAgIHZhciB1cmwgPSAnJztcclxuICAgICAgICBpZihwayl7XHJcbiAgICAgICAgICAgIHVybCA9ICcvY21zL2VkaXRfbmV3cy8nO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB1cmwgPSAnL2Ntcy93cml0ZV9uZXdzLyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB4ZnphamF4LnBvc3Qoe1xyXG4gICAgICAgICAgICAndXJsJzogdXJsLFxyXG4gICAgICAgICAgICAnZGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICd0aXRsZSc6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgJ2NhdGVnb3J5JzogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICAnZGVzYyc6IGRlc2MsXHJcbiAgICAgICAgICAgICAgICAndGh1bWJuYWlsJzogdGh1bWJuYWlsLFxyXG4gICAgICAgICAgICAgICAgJ2NvbnRlbnQnOiBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgJ25ld3NfaWQnOiBwa1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnc3VjY2Vzcyc6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmKHJlc3VsdFsnY29kZSddID09PSAyMDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHBrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeGZ6YWxlcnQuYWxlcnRTdWNjZXNzKCfmga3llpzvvIHmlrDpl7vkv67mlLnmiJDlip/vvIEnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB4ZnphbGVydC5hbGVydFN1Y2Nlc3MoJ+aBreWWnO+8geaWsOmXu+WPkeihqOaIkOWKn++8gScsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn07XHJcblxyXG5OZXdzLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICBzZWxmLmluaXRVRWRpdG9yKCk7XHJcbi8vICAgIHNlbGYubGlzdGVuUWluaXVVcGxvYWRGaWxlRXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuU3VibWl0RXZlbnQoKTtcclxuICAgIHNlbGYubGlzdGVuVXBsb2FkRmlsZUV2ZW50KCk7XHJcbn07XHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgbmV3cyA9IG5ldyBOZXdzKCk7XHJcbiAgICBuZXdzLnJ1bigpO1xyXG5cclxuICAgTmV3cy5wcm9ncmVzc0dyb3VwID0gJCgnI3Byb2dyZXNzLWdyb3VwJyk7XHJcbn0pOyJdLCJuYW1lcyI6WyJOZXdzIiwidGhpcyIsInByb2dyZXNzR3JvdXAiLCIkIiwicHJvdG90eXBlIiwiaW5pdFVFZGl0b3IiLCJ3aW5kb3ciLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaW5pdGlhbEZyYW1lSGVpZ2h0Iiwic2VydmVyVXJsIiwibGlzdGVuVXBsb2FkRmlsZUV2ZW50IiwidXBsb2FkQnRuIiwiY2hhbmdlIiwiZmlsZSIsImZpbGVzIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsImFwcGVuZCIsInhmemFqYXgiLCJwb3N0IiwidXJsIiwiZGF0YSIsInByb2Nlc3NEYXRhIiwiY29udGVudFR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwidmFsIiwibGlzdGVuU3VibWl0RXZlbnQiLCJjbGljayIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJwayIsImF0dHIiLCJ0aXRsZSIsImNhdGVnb3J5IiwiZGVzYyIsInRodW1ibmFpbCIsImNvbnRlbnQiLCJnZXRDb250ZW50IiwibmV3c19pZCIsInhmemFsZXJ0IiwiYWxlcnRTdWNjZXNzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJydW4iLCJzZWxmIl0sIm1hcHBpbmdzIjoiQUFBQSxTQUFTQSxPQUNMQyxLQUFLQyxjQUFnQkMsRUFBRSxtQkFHM0JILEtBQUtJLFVBQVVDLFlBQWMsV0FDekJDLE9BQU9DLEdBQUtDLEdBQUdDLFVBQVUsU0FBUyxDQUM5QkMsbUJBQXNCLElBQ3RCQyxVQUFhLHNCQUtyQlgsS0FBS0ksVUFBVVEsc0JBQXdCLFdBQ25DLElBQUlDLEVBQVlWLEVBQUUsa0JBQ2xCVSxFQUFVQyxPQUFPLFdBQ2IsSUFBSUMsRUFBT0YsRUFBVSxHQUFHRyxNQUFNLEdBQzFCQyxFQUFXLElBQUlDLFNBQ25CRCxFQUFTRSxPQUFPLE9BQU9KLEdBQ3ZCSyxRQUFRQyxLQUFLLENBQ1RDLElBQU8sb0JBQ1BDLEtBQVFOLEVBQ1JPLGFBQWUsRUFDZkMsYUFBZSxFQUNmQyxRQUFXLFNBQVVDLEdBQ2pCLElBQ1FMLEVBRGMsTUFBbkJLLEVBQWEsT0FDUkwsRUFBTUssRUFBYSxLQUFPLElBQ1R4QixFQUFFLG1CQUNSeUIsSUFBSU4sSUFFQSxNQUFuQkssRUFBYSxNQUNiZCxFQUFVZSxJQUFJLFVBeUVsQzVCLEtBQUtJLFVBQVV5QixrQkFBb0IsV0FDZjFCLEVBQUUsZUFDUjJCLE1BQU0sU0FBVUMsR0FDdEJBLEVBQU1DLGlCQUNOLElBQ0lDLEVBRE05QixFQUFFRixNQUNDaUMsS0FBSyxnQkFFZEMsRUFBUWhDLEVBQUUsdUJBQXVCeUIsTUFDakNRLEVBQVdqQyxFQUFFLDJCQUEyQnlCLE1BQ3hDUyxFQUFPbEMsRUFBRSxzQkFBc0J5QixNQUMvQlUsRUFBWW5DLEVBQUUsMkJBQTJCeUIsTUFDekNXLEVBQVVqQyxPQUFPQyxHQUFHaUMsYUFFcEJsQixFQUFNLEdBRU5BLEVBRERXLEVBQ08sa0JBRUEsbUJBR1ZiLFFBQVFDLEtBQUssQ0FDVEMsSUFBT0EsRUFDUEMsS0FBUSxDQUNKWSxNQUFTQSxFQUNUQyxTQUFZQSxFQUNaQyxLQUFRQSxFQUNSQyxVQUFhQSxFQUNiQyxRQUFXQSxFQUNYRSxRQUFXUixHQUVmUCxRQUFXLFNBQVVDLEdBQ0ssTUFBbkJBLEVBQWEsT0FDVE0sRUFDQ1MsU0FBU0MsYUFBYSxhQUFhLFdBQ2pDckMsT0FBT3NDLFNBQVNDLFdBSXRCSCxTQUFTQyxhQUFhLGFBQWEsV0FDL0JyQyxPQUFPc0MsU0FBU0Msa0JBVXhDN0MsS0FBS0ksVUFBVTBDLElBQU0sV0FDakIsSUFBSUMsRUFBTzlDLEtBQ1g4QyxFQUFLMUMsY0FFTDBDLEVBQUtsQixvQkFDTGtCLEVBQUtuQyx5QkFJVFQsRUFBRSxZQUNhLElBQUlILE1BQ1Y4QyxNQUVOOUMsS0FBS0UsY0FBZ0JDLEVBQUUifQ==
